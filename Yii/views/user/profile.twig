{% extends 'views/layouts/admin.twig' %}
{% block content %}
    <h2>Profile</h2>

    Hi there, {{ App.user.username }}!

    <h3>Username</h3>
    <div class="row">
        {% set form = this.beginWidget('CActiveForm', {
            'action':this.createUrl('user/updateUsername')
        }) %}
        <div class="col-md-6">
            <div class="form-group{{ user.getError('username')?' has-error' }}">
                {{ form.textField(user, 'username', {
                    'class':'form-control',
                    'placeholder':user.getAttributeLabel('username')
                }) }}
                {% if user.getError('username') %}
                    <span class="help-block">{{ user.getError('username') }}</span>
                {% endif %}
            </div>
            <div class="form-row">
                {{ C.Html.submitButton('Submit', {
                'class':'btn btn-primary'
                }) }}
            </div>
        </div>
        {{ void(this.endWidget) }}
    </div>
    <h3>Password update</h3>
    <div class="row">
        {% set form = this.beginWidget('CActiveForm', {
            'action':this.createUrl('user/updatePassword')
        }) %}
        <div class="col-md-6">
            <div class="form-group{{ user.getError('password')?' has-error' }}">
                {{ form.passwordField(user, 'password', {
                    'value':'',
                    'class':'form-control',
                    'placeholder':user.getAttributeLabel('password')
                }) }}
                {% if user.getError('password') %}
                    <span class="help-block">{{ user.getError('password') }}</span>
                {% endif %}
            </div>
            <div class="form-group">
                <div class="form-row{{ user.getError('newPassword')?' has-error' }}">
                    {{ form.passwordField(user, 'newPassword', {
                        'value':'',
                        'class':'form-control',
                        'placeholder':user.getAttributeLabel('newPassword')
                    }) }}
                    {% if user.getError('newPassword') %}
                        <span class="help-block">{{ user.getError('newPassword') }}</span>
                    {% endif %}
                </div>
                <div class="form-row{{ user.getError('newPasswordRepeat')?' has-error' }}">
                    {{ form.passwordField(user, 'newPasswordRepeat', {
                        'value':'',
                        'class':'form-control',
                        'placeholder':user.getAttributeLabel('newPasswordRepeat')
                    }) }}
                    {% if user.getError('newPasswordRepeat') %}
                        <span class="help-block">{{ user.getError('newPasswordRepeat') }}</span>
                    {% endif %}
                </div>
            </div>
            <div class="form-row">
                {{ C.Html.submitButton('Submit', {
                    'class':'btn btn-primary'
                }) }}
            </div>
        </div>
        {{ void(this.endWidget()) }}
    </div>

    <h3>The nullmighty plzdeleteme link</h3>
    <a href="{{ this.createUrl('user/suicide') }}" class="btn btn-primary">Plz delete me</a>
{% endblock %}